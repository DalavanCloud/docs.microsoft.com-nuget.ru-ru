---
title: Общие сведения о NuGet интерфейса API
description: NuGet API — это набор конечных точек HTTP, которые можно использовать для загрузки пакетов, получить метаданные, публикации новых пакетов и т. д.
author: joelverhagen
ms.author: jver
manager: skofman
ms.date: 10/26/2017
ms.topic: reference
ms.reviewer: kraigb
ms.openlocfilehash: a638dba005c14bff4b2e668e2d6ca527a67b94a9
ms.sourcegitcommit: 3eab9c4dd41ea7ccd2c28bb5ab16f6fbbec13708
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/26/2018
---
# <a name="nuget-api"></a>NuGet интерфейса API

NuGet API — это набор конечных точек HTTP, которые могут использоваться для загрузки пакетов, получить метаданные, публикации новых пакетов и выполнения большинства других операций, доступных в официальный клиенты NuGet.

Этот API используется клиентом NuGet в Visual Studio, nuget.exe и .NET CLI для выполнения операций NuGet, такие как [ `dotnet restore` ](/dotnet/articles/core/preview3/tools/dotnet-restore), поиск в пользовательском Интерфейсе Visual Studio и [ `nuget.exe push` ](../tools/cli-ref-push.md).

Обратите внимание, в некоторых случаях nuget.org Дополнительные требования, которые не являются обязательными для других источников пакетов. Эти различия описаны в [nuget.org протоколов](nuget-protocols.md).

## <a name="service-index"></a>Служба индекс.

Точка входа для API является документ JSON также нужное расположение. В этом документе называется **служба индекс**. Место хранения индекса службы для nuget.org `https://api.nuget.org/v3/index.json`.

Этот документ JSON содержит список *ресурсов* которой предоставляют различные возможности и выполнения различных вариантов использования.

Клиенты, поддерживающие API должен принимать один или несколько из этих URL-адрес службы индекс качестве средства для подключения к источникам соответствующий пакет.

Дополнительные сведения об индексе службы см. в разделе [его Справочник по API](service-index.md).

## <a name="versioning"></a>Управление версиями

API-версия 3 протокола HTTP NuGet. Этот протокол иногда называют «API V3.» Эти справочные документы будут называться эта версия протокола просто «API».

Указывает версию схемы индекса службы `version` свойств в индексе службы. API требует, что строка версии имеет номер основной версии `3`. Некритических изменений, выполненных в схеме индекса службы, строку версии, дополнительный номер версии увеличивается.

Старые клиенты (например nuget.exe 2.x) не поддерживают V3 API и поддерживают только старые V2 API, которые здесь не описаны.

NuGet V3 API называется таким образом, так как это последователь V2 API, который был протокол на основе OData, реализуемый версии 2.x официальный клиента NuGet. Сначала поддерживаемые версии 3.0 официальный клиента NuGet V3 API и по-прежнему версии последней основной протокол поддерживается клиентом NuGet, 4.0, а также на. 

API-интерфейса были внесены изменения протокола не критическое момента первого выпуска.

## <a name="resources-and-schema"></a>Ресурсы и схемы

**Служба индекс** описывает различные ресурсы. Ниже приведены поддерживаемые ресурсы текущего набора.

Имя ресурса                                                          | Обязательно | Описание
---------------------------------------------------------------------- | -------- | -----------
[`PackagePublish`](package-publish-resource.md)                        | да      | Push и удаления (или исключить) пакетов.
[`SearchQueryService`](search-query-service-resource.md)               | да      | Фильтровать и искать пакеты по ключевым словам.
[`RegistrationsBaseUrl`](registration-base-url-resource.md)            | да      | Получите метаданные пакета.
[`PackageBaseAddress`](package-base-address-resource.md)               | да      | Получение содержимого пакета (.nupkg).
[`SearchAutocompleteService`](search-autocomplete-service-resource.md) | Нет       | Обнаружение идентификаторы пакетов и версий с подстроки.
[`ReportAbuseUriTemplate`](report-abuse-resource.md)                   | Нет       | Создайте URL-адрес для доступа к веб-страницы «сообщить о нарушении».
[`Catalog`](catalog-resource.md)                                       | Нет       | Полную запись всех событий пакета.

Как правило все недвоичные данные, возвращенные ресурс API сериализуются с помощью JSON. Схема ответа, возвращаемые каждого ресурса в индексе службы определяется по отдельности для этого ресурса. Дополнительные сведения о каждом ресурсе см. в разделах, перечисленных выше.

> [!Note]
> Если источник не реализует `SearchAutocompleteService` любое поведение автозавершения должны быть отключены надлежащим образом. При `ReportAbuseUriTemplate` не реализован, официальные возвращается клиента NuGet к nuget.org отчетов о нарушении URL-адрес (отслеживаемых по [4924 домашние NuGet #](https://github.com/NuGet/Home/issues/4924)). Другие клиенты могут начать просто не отображать URL-адрес отчетов о нарушении для пользователя.

## <a name="timestamps"></a>Метки времени

Все отметки времени, возвращаемых API, UTC или указаны с помощью [ISO 8601](https://www.iso.org/iso-8601-date-and-time-format.html) представление. 

## <a name="http-methods"></a>Методы HTTP

Команда   | Использовать
------ | -----------
GET    | Выполняет операцию только для чтения, обычно извлечение данных.
HEAD,   | Получает заголовки ответа для соответствующего `GET` запроса.
PUT    | Создает ресурс, который не существует, или если она существует, он обновляет. Некоторые ресурсы могут не поддерживать обновление.
DELETE | Удаляет или unlists ресурса.

## <a name="http-status-codes"></a>Коды состояния HTTP

Код | Описание
---- | -----
200  | Успех, и текст ответа.
201  | Об успешном выполнении и ресурс был создан.
202  | Операция выполнена успешно; запрос принят, но некоторые действия, по-прежнему возможно, неполный и завершенные асинхронно.
204  | Успех, но текст ответа отсутствует.
301  | Постоянное перенаправление.
302  | Временное перенаправление.
400  | Недопустимые параметры в URL-адрес или в тексте запроса.
401  | Предоставленные учетные данные являются недопустимыми.
403  | Действие запрещено учетом предоставленных учетных данных.
404  | Запрошенный ресурс не существует.
409  | Это запрос конфликтует с существующим ресурсом.
500  | Службе произошла непредвиденная ошибка.
503  | Служба временно недоступна.

Любой `GET` запрос, выполненный к конечной точке API может вернуть перенаправления HTTP (301 или 302). Клиенты должны правильно обрабатывать такие перенаправления, наблюдая за `Location` заголовок и последующем выдача `GET`. Документация, касающиеся определенных конечных точек не вызывается явно, где может использоваться перенаправления.

В случае с кодом состояния уровня 500 клиент может реализовать механизм повтора разумного. Официальный NuGet клиента повторные попытки трижды при обнаружении любой код состояния 500 уровня или ошибка TCP/DNS.

## <a name="http-request-headers"></a>Заголовки HTTP-запросов

name                     | Описание
------------------------ | -----------
X-NuGet-ApiKey           | Требуется для принудительной отправки и удаления, в разделе [ `PackagePublish` ресурсов](package-publish-resource.md)
X-NuGet--версии клиента   | **Рекомендуется использовать** и заменяется `X-NuGet-Protocol-Version`
X NuGet протокол версии | Требуется в некоторых случаях только в nuget.org. в разделе [nuget.org протоколы](NuGet-Protocols.md)
X-NuGet ИД сеанса       | *Необязательный*. NuGet клиентов v4.7 + идентификации HTTP-запросов, которые являются частью одного сеанса клиента NuGet. Для `PackageReference` операции восстановления является идентификатором одного сеанса для других сценариев, например автозавершение, и `packages.config` может существовать несколько разных идентификатор сеанса из-за как разложить код восстановления.

## <a name="authentication"></a>Проверка подлинности

Проверка подлинности остается зависит от реализации источника пакета для определения. Для nuget.org только `PackagePublish` ресурс требует проверки подлинности через специальный заголовок ключа API. В разделе [ `PackagePublish` ресурсов](package-publish-resource.md) подробные сведения.

---
title: Способы установки пакетов NuGet | Документация Майкрософт
author: kraigb
ms.author: kraigb
manager: ghogen
ms.date: 02/12/2018
ms.topic: overview
ms.prod: nuget
ms.technology: ''
description: В этой статье описывается процесс установки пакетов NuGet в проект, включая процессы на диске и все происходящее с применимыми файлами проекта.
keywords: установка NuGet, использование пакета NuGet, установка пакетов NuGet, ссылки на пакеты NuGet
ms.reviewer:
- karann-msft
- unniravindranathan
ms.workload:
- dotnet
- aspnet
ms.openlocfilehash: b8cce7bd6c1bd73eb018b8891ddd72b2f4432d55
ms.sourcegitcommit: beb229893559824e8abd6ab16707fd5fe1c6ac26
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/28/2018
---
# <a name="different-ways-to-install-a-nuget-package"></a><span data-ttu-id="da4a9-104">Способы установки пакета NuGet</span><span class="sxs-lookup"><span data-stu-id="da4a9-104">Different ways to install a NuGet Package</span></span>

<span data-ttu-id="da4a9-105">Пакеты NuGet можно загрузить и установить с помощью любого из методов, приведенных в таблице ниже (если клиентские средства NuGet не установлены, [узнайте, как это сделать](../install-nuget-client-tools.md)).</span><span class="sxs-lookup"><span data-stu-id="da4a9-105">NuGet packages are downloaded and installed using any of the methods in the following table (see [Install NuGet client tools](../install-nuget-client-tools.md) if you don't have these installed already).</span></span> <span data-ttu-id="da4a9-106">Вместо загрузки пакет можно извлечь из кэша.</span><span class="sxs-lookup"><span data-stu-id="da4a9-106">The package may be retrieved from a cache instead of downloaded.</span></span>

| <span data-ttu-id="da4a9-107">Метод</span><span class="sxs-lookup"><span data-stu-id="da4a9-107">Method</span></span> | <span data-ttu-id="da4a9-108">Описание:</span><span class="sxs-lookup"><span data-stu-id="da4a9-108">Description</span></span> |
| --- | --- |
| <span data-ttu-id="da4a9-109">Интерфейс командной строки dotnet.exe</span><span class="sxs-lookup"><span data-stu-id="da4a9-109">dotnet.exe CLI</span></span><br/>`dotnet add package <package_name>` | <span data-ttu-id="da4a9-110">(Все платформы.) Извлекает пакет, определенный атрибутом \<имя_пакета\>, и развертывает его содержимое в папку в текущем каталоге, а затем добавляет ссылку в файл проекта.</span><span class="sxs-lookup"><span data-stu-id="da4a9-110">(All platforms) Retrieves the package identified by \<package_name\>, expands its contents into a folder in the current directory, and adds a reference to the project file.</span></span> <span data-ttu-id="da4a9-111">Кроме того, извлекает и устанавливает зависимости.</span><span class="sxs-lookup"><span data-stu-id="da4a9-111">Also retrieves and installs dependencies.</span></span><ul><li>[<span data-ttu-id="da4a9-112">Установка и использование пакета (dotnet CLI)</span><span class="sxs-lookup"><span data-stu-id="da4a9-112">Install and use a package (dotnet CLI)</span></span>](../quickstart/install-and-use-a-package-using-the-dotnet-cli.md)</li><li>[<span data-ttu-id="da4a9-113">Команда dotnet add package</span><span class="sxs-lookup"><span data-stu-id="da4a9-113">dotnet add package command</span></span>](/dotnet/core/tools/dotnet-add-package)</li></ul> |
| <span data-ttu-id="da4a9-114">Пользовательский интерфейс диспетчера пакетов (Visual Studio)</span><span class="sxs-lookup"><span data-stu-id="da4a9-114">Package Manager UI (Visual Studio)</span></span> | <span data-ttu-id="da4a9-115">(Компьютеры с Windows и Mac.) Пользовательский интерфейс, через который можно просматривать, выбирать и устанавливать в проект пакеты и их зависимости из указанного источника пакетов.</span><span class="sxs-lookup"><span data-stu-id="da4a9-115">(Windows and Mac) Provides a UI through which you can browse, select, and install packages and their dependencies into a project from a specified package source.</span></span> <span data-ttu-id="da4a9-116">Добавляет ссылки на установленные пакеты в файл проекта.</span><span class="sxs-lookup"><span data-stu-id="da4a9-116">Adds references to installed packages to the project file.</span></span><ul><li>[<span data-ttu-id="da4a9-117">Установка и использование пакета (Visual Studio)</span><span class="sxs-lookup"><span data-stu-id="da4a9-117">Install and use a package (Visual Studio)</span></span>](../quickstart/install-and-use-a-package-in-visual-studio.md)</li><li>[<span data-ttu-id="da4a9-118">Справочник по пользовательскому интерфейсу диспетчера пакетов для компьютеров с Windows</span><span class="sxs-lookup"><span data-stu-id="da4a9-118">Package Manager UI reference (Windows)</span></span>](../tools/package-manager-ui.md)</li><li>[<span data-ttu-id="da4a9-119">Включение пакета NuGet в проект</span><span class="sxs-lookup"><span data-stu-id="da4a9-119">Including a NuGet package in your project (Mac)</span></span>](/visualstudio/mac/nuget-walkthrough)</li></ul> |
| <span data-ttu-id="da4a9-120">Консоль диспетчера пакетов (Visual Studio)</span><span class="sxs-lookup"><span data-stu-id="da4a9-120">Package Manager Console (Visual Studio)</span></span><br/>`Install-Package <package_name>` | <span data-ttu-id="da4a9-121">(Только компьютеры с Windows.) Извлекает пакет, определенный атрибутом \<имя_пакета\>, из выбранного источника и устанавливает его в указанный проект в решении, а затем добавляет ссылку в файл проекта.</span><span class="sxs-lookup"><span data-stu-id="da4a9-121">(Windows only) Retrieves and installs the package identified by \<package_name\> from a selected source into a specified project in the solution, then adds a reference to the project file.</span></span> <span data-ttu-id="da4a9-122">Кроме того, извлекает и устанавливает зависимости.</span><span class="sxs-lookup"><span data-stu-id="da4a9-122">Also retrieves and installs dependencies.</span></span><ul><li>[<span data-ttu-id="da4a9-123">Установка и использование пакета (Visual Studio)</span><span class="sxs-lookup"><span data-stu-id="da4a9-123">Install and use a package (Visual Studio)</span></span>](../quickstart/install-and-use-a-package-in-visual-studio.md)</li><li>[<span data-ttu-id="da4a9-124">Руководство по консоли диспетчера пакетов</span><span class="sxs-lookup"><span data-stu-id="da4a9-124">Package Manager Console guide</span></span>](../tools/package-manager-console.md)</li></ul> |
| <span data-ttu-id="da4a9-125">Интерфейс командной строки nuget.exe</span><span class="sxs-lookup"><span data-stu-id="da4a9-125">nuget.exe CLI</span></span><br/>`nuget install <package_name>` | <span data-ttu-id="da4a9-126">(Все платформы.) Извлекает пакет, определенный атрибутом \<package_name\>, и развертывает его содержимое в папку в текущем каталоге. Кроме того, может извлекать все пакеты, перечисленные в файле `packages.config`.</span><span class="sxs-lookup"><span data-stu-id="da4a9-126">(All platforms) Retrieves the package identified by \<package_name\> and expands its contents into a folder in the current directory; can also retrieve all packages listed in a `packages.config` file.</span></span> <span data-ttu-id="da4a9-127">Извлекает и устанавливает зависимости, но не вносит никаких изменений в файлы проекта или файл `packages.config`.</span><span class="sxs-lookup"><span data-stu-id="da4a9-127">Also retrieves and installs dependencies, but makes no changes to project files or `packages.config`.</span></span><ul><li>[<span data-ttu-id="da4a9-128">Команда install</span><span class="sxs-lookup"><span data-stu-id="da4a9-128">install command</span></span>](../tools/cli-ref-install.md)</li></ul> |

## <a name="what-happens-when-a-package-is-installed"></a><span data-ttu-id="da4a9-129">Процесс установки пакета</span><span class="sxs-lookup"><span data-stu-id="da4a9-129">What happens when a package is installed</span></span>

<span data-ttu-id="da4a9-130">Попросту говоря, различные средства NuGet обычно создают ссылку на пакет в файле проекта или файле `packages.config`, а затем восстанавливают пакет, фактически устанавливая его.</span><span class="sxs-lookup"><span data-stu-id="da4a9-130">Simply said, the different NuGet tools typically create a reference to a package in the project file or `packages.config`, then perform a package restore, which effectively installs the package.</span></span> <span data-ttu-id="da4a9-131">Исключение составляет команда `nuget install`, которая только добавляет пакет в папку `packages` и не меняет какие-либо другие файлы.</span><span class="sxs-lookup"><span data-stu-id="da4a9-131">The exception is `nuget install`, which only expands the package into a `packages` folder and does not modify any other files.</span></span>

<span data-ttu-id="da4a9-132">Общий процесс выглядит следующим образом:</span><span class="sxs-lookup"><span data-stu-id="da4a9-132">The general process is as follows:</span></span>

1. <span data-ttu-id="da4a9-133">(Все средства, кроме `nuget.exe`.) Записывает идентификатор и версию пакета в файл проекта или файл `packages.config`.</span><span class="sxs-lookup"><span data-stu-id="da4a9-133">(All tools except `nuget.exe`) Record the package identifer and version into the project file or `packages.config`.</span></span>

1. <span data-ttu-id="da4a9-134">Получает сам пакет:</span><span class="sxs-lookup"><span data-stu-id="da4a9-134">Acquire the package:</span></span>
    - <span data-ttu-id="da4a9-135">Проверяет, установлен ли пакет (по точному идентификатору и номеру версии) в папке *global-packages*, как описано в статье [Управление папкой установки глобальных пакетов, кэшем и временными папками](managing-the-global-packages-and-cache-folders.md).</span><span class="sxs-lookup"><span data-stu-id="da4a9-135">Check if the package (by exact identifer and version number) is already installed in the *global-packages* folder as described on [Managing the global packages and cache folders](managing-the-global-packages-and-cache-folders.md).</span></span>

    - <span data-ttu-id="da4a9-136">Если пакета нет в папке *global-packages*, выполняется попытка извлечь пакет из источников, перечисленных в [файлах конфигурации](Configuring-NuGet-Behavior.md).</span><span class="sxs-lookup"><span data-stu-id="da4a9-136">If the package is not in the *global-packages* folder, attempt to retrieve it from the sources listed listed in the [configuration files](Configuring-NuGet-Behavior.md).</span></span> <span data-ttu-id="da4a9-137">Если источники сетевые, выполняется попытка извлечь пакет из кэша, когда не указан параметр `-NoCache` с помощью команды `nuget.exe` или параметр `--no-cache` с помощью команды `dotnet restore`.</span><span class="sxs-lookup"><span data-stu-id="da4a9-137">For online sources, attempt first to retrieve the package from the cache unless `-NoCache` is specified with `nuget.exe` commands or `--no-cache` is specified with `dotnet restore`.</span></span> <span data-ttu-id="da4a9-138">(Visual Studio и `dotnet add package` всегда используют кэш.) При использовании пакета из кэша в выходных данных отображается параметр CACHE.</span><span class="sxs-lookup"><span data-stu-id="da4a9-138">(Visual Studio and `dotnet add package` always use the cache.) If a package is used from the cache, "CACHE" appears in the output.</span></span> <span data-ttu-id="da4a9-139">Срок действия кэша составляет 30 минут.</span><span class="sxs-lookup"><span data-stu-id="da4a9-139">The cache has an expiration time of 30 minutes.</span></span>

    - <span data-ttu-id="da4a9-140">Если пакета нет в кэше, выполняется попытка скачать его из источников, перечисленных в файлах конфигурации.</span><span class="sxs-lookup"><span data-stu-id="da4a9-140">If the package is not in the cache, attempt to download it from the sources listed in the configuration.</span></span> <span data-ttu-id="da4a9-141">После скачивания пакета в выходных данных отображается параметр GET и ОК.</span><span class="sxs-lookup"><span data-stu-id="da4a9-141">If a package is downloaded, "GET" and "OK" appear in the output.</span></span>

    - <span data-ttu-id="da4a9-142">Если пакет не удается извлечь из любых источников, на этом этапе установка завершится ошибкой, например [NU1103](../reference/errors-and-warnings.md#nu1103).</span><span class="sxs-lookup"><span data-stu-id="da4a9-142">If the package cannot be successfully acquired from any sources, installation fails at this point with an error such as [NU1103](../reference/errors-and-warnings.md#nu1103).</span></span> <span data-ttu-id="da4a9-143">Обратите внимание, что в выходных данных ошибок выполнения команд `nuget.exe` отображается только последний проверенный источник, но подразумевается, что пакет отсутствует во всех.</span><span class="sxs-lookup"><span data-stu-id="da4a9-143">Note that errors from `nuget.exe` commands show only the last source checked, but implies that the package wasn't available from any source.</span></span>

    <span data-ttu-id="da4a9-144">При извлечении пакета с помощью NuGet источники проверяются в таком порядке:</span><span class="sxs-lookup"><span data-stu-id="da4a9-144">When acquiring the package, the order of sources in the NuGet configuration may apply:</span></span>
      - <span data-ttu-id="da4a9-145">В проектах, использующих формат PackageReference, NuGet проверяет папку локальных источников и сетевые папки, а затем источники HTTP.</span><span class="sxs-lookup"><span data-stu-id="da4a9-145">For projects using the PackageReference format, NuGet checks sources local folder and network shares before checking HTTP sources.</span></span>
      - <span data-ttu-id="da4a9-146">В проектах, в которых используется формат управления `packages.config`, NuGet применяет порядок источников в файлах конфигурации.</span><span class="sxs-lookup"><span data-stu-id="da4a9-146">For projects using the `packages.config` management format, NuGet uses the order of the sources in the configuration.</span></span> <span data-ttu-id="da4a9-147">Исключение — это операции восстановления, в случае которых порядок проверки не учитывается и NuGet использует пакет из любого первого ответившего источника.</span><span class="sxs-lookup"><span data-stu-id="da4a9-147">An exception is restore operations, in which case source ordering is ignored and NuGet uses the package from whichever source responds first.</span></span>
      - <span data-ttu-id="da4a9-148">В целом порядок проверки источников NuGet не особенно важен, так как любой конкретный пакет с указанным идентификатором и номером версии будет одним и тем же для всех источников.</span><span class="sxs-lookup"><span data-stu-id="da4a9-148">In general, the order in which NuGet checks sources isn't particularly meaningful, because any given package with a specific identifier and version number is exactly the same on whatever source it's found.</span></span>

1. <span data-ttu-id="da4a9-149">(Все средства, кроме `nuget.exe`.) Сохраняет копию пакета и другие сведения в папке *http-cache*, как описано в статье [Управление папкой установки глобальных пакетов, кэшем и временными папками](managing-the-global-packages-and-cache-folders.md).</span><span class="sxs-lookup"><span data-stu-id="da4a9-149">(All tools except `nuget.exe`) Save a copy of the package and other information in the *http-cache* folder as described on [Managing the global packages and cache folders](managing-the-global-packages-and-cache-folders.md).</span></span>

1. <span data-ttu-id="da4a9-150">После загрузки устанавливает в папке *global-packages* пользователя.</span><span class="sxs-lookup"><span data-stu-id="da4a9-150">If downloaded, install the package into the per-user *global-packages* folder.</span></span> <span data-ttu-id="da4a9-151">NuGet создает вложенную папку для каждого идентификатора пакета, а затем создает вложенные папки для каждой установленной версии пакета.</span><span class="sxs-lookup"><span data-stu-id="da4a9-151">NuGet creates a subfolder for each package identifier, then creates subfolders for each installed version of the package.</span></span>

1. <span data-ttu-id="da4a9-152">Обновление других файлов и папок проекта:</span><span class="sxs-lookup"><span data-stu-id="da4a9-152">Update other project files and folders:</span></span>

    - <span data-ttu-id="da4a9-153">В проектах, использующих PackageReference, обновляет схему зависимостей пакетов, хранящихся в файле `obj/project.assets.json`.</span><span class="sxs-lookup"><span data-stu-id="da4a9-153">For projects using PackageReference, update the package dependency graph stored in `obj/project.assets.json`.</span></span> <span data-ttu-id="da4a9-154">Само содержимое пакета не копируется в какую-либо папку проекта.</span><span class="sxs-lookup"><span data-stu-id="da4a9-154">Package contents themselves are not copied into any project folder.</span></span>
    - <span data-ttu-id="da4a9-155">В проектах, использующих `packages.config`, копирует совпадающие с требуемой версией .NET Framework части расширенного пакета в папку проекта `packages`.</span><span class="sxs-lookup"><span data-stu-id="da4a9-155">For projects using `packages.config`, copy those parts of the expanded package that match the project's target framework into project's `packages` folder.</span></span> <span data-ttu-id="da4a9-156">(При использовании `nuget install` копируется весь расширенный пакет, так как `nuget.exe` не проверяет файлы проекта на наличие требуемой версии .NET Framework.)</span><span class="sxs-lookup"><span data-stu-id="da4a9-156">(When using `nuget install`, the entire expanded package is copied because `nuget.exe` does not examine project files to identify the target framework.)</span></span>
    - <span data-ttu-id="da4a9-157">Обновляет `app.config` и (или) `web.config`, если пакет использует [преобразования источника и файла конфигурации](../create-packages/source-and-config-file-transformations.md).</span><span class="sxs-lookup"><span data-stu-id="da4a9-157">Update `app.config` and/or `web.config` if the package uses [source and config file transformations](../create-packages/source-and-config-file-transformations.md).</span></span>

1. <span data-ttu-id="da4a9-158">Устанавливает все зависимости нижнего уровня в случае их отсутствия в проекте.</span><span class="sxs-lookup"><span data-stu-id="da4a9-158">Install any down-level dependencies if not already present in the project.</span></span> <span data-ttu-id="da4a9-159">Этот процесс может обновить версии пакетов, как описано в статье [Принципы разрешения зависимостей пакетов в NuGet](../consume-packages/dependency-resolution.md).</span><span class="sxs-lookup"><span data-stu-id="da4a9-159">This process might update package versions in the process, as described in [Dependency Resolution](../consume-packages/dependency-resolution.md).</span></span>

1. <span data-ttu-id="da4a9-160">(Только Visual Studio.) Отображает файл сведений пакета (если он доступен) в окне Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="da4a9-160">(Visual Studio only) Display the package's readme file, if available, in a Visual Studio window.</span></span>

## <a name="related-articles"></a><span data-ttu-id="da4a9-161">Связанные статьи</span><span class="sxs-lookup"><span data-stu-id="da4a9-161">Related articles</span></span>

- [<span data-ttu-id="da4a9-162">Общие сведения и процесс использования пакетов</span><span class="sxs-lookup"><span data-stu-id="da4a9-162">Overview and workflow of package consumption</span></span>](../consume-packages/overview-and-workflow.md)
- [<span data-ttu-id="da4a9-163">Поиск и выбор пакетов</span><span class="sxs-lookup"><span data-stu-id="da4a9-163">Finding and choosing packages</span></span>](../consume-packages/finding-and-choosing-packages.md)
- [<span data-ttu-id="da4a9-164">Управление папкой установки глобальных пакетов, кэшем и временными папками</span><span class="sxs-lookup"><span data-stu-id="da4a9-164">Managing the NuGet cache and global-packages folders</span></span>](managing-the-global-packages-and-cache-folders.md)
- [<span data-ttu-id="da4a9-165">Настройка поведения NuGet</span><span class="sxs-lookup"><span data-stu-id="da4a9-165">Configuring NuGet behavior</span></span>](../consume-packages/configuring-nuget-behavior.md)

---
title: "Использование NuGet.Server для размещения веб-каналов NuGet | Документы Майкрософт"
author: kraigb
ms.author: kraigb
manager: ghogen
ms.date: 8/25/2017
ms.topic: article
ms.prod: nuget
ms.technology: 
ms.assetid: 45138f80-9717-42c2-8b34-9a1bc1fb3eab
description: "Описывается создание и размещение веб-канала пакетов NuGet на любом сервере со службами IIS с помощью NuGet.Server для предоставления доступа к пакетам по протоколам HTTP и OData."
keywords: "веб-канал NuGet, коллекция NuGet, удаленный веб-канал пакетов, NuGet.Server"
ms.reviewer:
- karann-msft
- unniravindranathan
ms.openlocfilehash: f37b9b711a2bc8c39314214113045a6485f297a8
ms.sourcegitcommit: d0ba99bfe019b779b75731bafdca8a37e35ef0d9
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/14/2017
---
# <a name="nugetserver"></a>NuGet.Server

NuGet.Server — это предоставляемый организацией .NET Foundation пакет, который создает приложение ASP.NET для размещения веб-канала пакетов на любом сервере со службами IIS. Попросту говоря, NuGet.Server создает на сервере папку, доступную по протоколу HTTP(S) (и, в частности, OData). Простота настройки делает это решение оптимальным для несложных сценариев.

1. Создайте пустое веб-приложение ASP.NET в Visual Studio и добавьте в него пакет NuGet.Server.
1. Настройте папку `Packages` в приложении и добавьте пакеты.
1. Разверните приложение на подходящем сервере.

В следующих разделах подробно рассматривается выполнение этого процесса с помощью C#.

## <a name="create-and-deploy-an-aspnet-web-application-with-nugetserver"></a>Создание и развертывание веб-приложения ASP.NET с пакетом NuGet.Server

1. В Visual Studio последовательно выберите **Файл > Создать > Проект**, выберите целевую платформу .NET Framework 4.6 (см. ниже), выполните поиск по запросу "ASP.NET" и выберите шаблон **Веб-приложение ASP.NET (.NET Framework)** для C#.

    ![Выбор целевой платформы .NET Framework 4.6](media/Hosting_01-NuGet.Server-Set4.6.png)

1. Присвойте приложению подходящее имя, *отличное* от NuGet.Server, нажмите кнопку "ОК", а затем в следующем диалоговом окне выберите **пустой** шаблон и нажмите кнопку "ОК".

1. Щелкните проект правой кнопкой мыши, выберите пункт **Управление пакетами NuGet**, а затем в пользовательском интерфейсе диспетчера пакетов найдите и установите последнюю версию пакета NuGet.Server, если целевой платформой является .NET Framework 4.6. (Ее также можно установить из консоли диспетчера пакетов с помощью команды `Install-Package NuGet.Server`.)

    ![Установка пакета NuGet.Server](media/Hosting_02-NuGet.Server-Package.png)

    > [!Important]
    > Если веб-приложение предназначено для платформы .NET Framework 4.5.2, необходимо вместо этого установить версию NuGet Server **2.10.3**.

1. В результате установки NuGet.Server пустое веб-приложение преобразуется в источник пакетов. В приложении создается папка `Packages`, а файл `web.config` перезаписывается для добавления дополнительных параметров (подробные сведения см. в комментариях в этом файле).

1. Чтобы сделать пакеты доступными через веб-канал при публикации приложения на сервере, добавьте их файлы `.nupkg` в папку `Packages` в Visual Studio, а затем присвойте свойству **Действие сборки** значение **Содержимое**, а свойству **Копировать в выходной каталог** — значение **Всегда копировать**.

    ![Копирование пакетов в папку Packages в проекте](media/Hosting_03-NuGet.Server-Package-Folder.png)

1. Запустите сайт локально в Visual Studio (без отладки, то есть с помощью клавиш CTRL+F5). На домашней странице приводятся URL-адреса веб-канала пакетов.

    ![Домашняя страница по умолчанию для приложения с пакетом NuGet.Server](media/Hosting_04-NuGet.Server-FeedHomePage.png)

1. Щелкните ссылку **here** (здесь) в выделенной выше области, чтобы увидеть веб-канал пакетов OData.

1. При первом запуске приложения пакет NuGet.Server изменяет структуру папки `Packages` так, чтобы она содержала вложенную папку для каждого пакета. Такая структура соответствует [структуре локального хранилища](http://blog.nuget.org/20151118/nuget-3.3.html#folder-based-repository-commands), представленной в NuGet 3.3, что позволяет повысить производительность. При добавлении дополнительных пакетов следуйте этой структуре.

1. Протестировав развертывание в локальной среде, можно развернуть приложение на любом внутреннем или внешней сайте.
1. При развертывании на сайте `http://<domain>` URL-адрес источника пакетов будет иметь вид `http://<domain>/nuget`.

## <a name="configuring-the-packages-folder"></a>Настройка папки Packages

В `NuGet.Server` 1.5 или более поздней версии можно более детально настроить папку с пакетами с помощью значения `appSetting/packagesPath` в файле `web.config`.

```xml
<appSettings>
    <!-- Set the value here to specify your custom packages folder. -->
    <add key="packagesPath" value="C:\MyPackages" />
</appSettings>
```

`packagesPath` может быть абсолютным или виртуальным путем.

Если параметр `packagesPath` опущен или имеет пустое значение, используется папка пакетов по умолчанию `~/Packages`.

## <a name="adding-packages-to-the-feed-externally"></a>Добавление пакетов в веб-канал извне

После запуска сайта NuGet.Server можно добавлять и удалять пакеты с помощью программы nuget.exe при условии, что в файле `web.config` задано значение ключа API.

После установки пакета NuGet.Server файл `web.config` содержит пустое значение `appSetting/apiKey`.

```xml
<appSettings>
    <add key="apiKey" value="" />
</appSettings>
```

Если параметр `apiKey` опущен или имеет пустое значение, отправка пакетов в веб-канал отключена.

Чтобы включить эту возможность, присвойте параметру `apiKey` значение (в идеале надежный пароль) и добавьте ключ `appSettings/requireApiKey` со значением `true`.

```xml
<appSettings>
        <!-- Sets whether an API Key is required to push/delete packages -->
    <add key="requireApiKey" value="true" />

    <!-- Set a shared password (for all users) to push/delete packages -->
    <add key="apiKey" value="" />
</appSettings>
```

Если сервер уже защищен или ключ API не требуется по иным причинам (например, при использовании частного сервера в локальной сети рабочей группы), ключу `requireApiKey` можно присвоить значение `false`. После этого все пользователи, имеющие доступ к серверу, смогут отправлять или удалять пакеты.
---
title: "Поставщики учетных данных NuGet.exe | Документы Microsoft"
author: kraigb
ms.author: kraigb
manager: ghogen
ms.date: 12/12/2017
ms.topic: article
ms.prod: nuget
ms.technology: 
description: "NuGet.exe поставщиков учетных данных проверки подлинности в веб-канала и реализуются как исполняемые файлы командной строки, соблюдать определенные соглашения."
keywords: "поставщики учетных данных NuGet.exe, API-Интерфейс, поставщика учетных данных проверки подлинности в веб-канала, проверки подлинности в коллекции"
ms.reviewer:
- karann-msft
- unniravindranathan
ms.openlocfilehash: 88ce0106ad4e628ba8120f94b7951c7746ab67f3
ms.sourcegitcommit: 262d026beeffd4f3b6fc47d780a2f701451663a8
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/25/2018
---
# <a name="authenticating-feeds-with-nugetexe-credential-providers"></a>Проверка подлинности веб-каналы через поставщиков учетных данных nuget.exe

*NuGet 3.3 +*

Когда `nuget.exe` требуются учетные данные для проверки подлинности для веб-канал, он ищет их следующим образом:

1. NuGet сначала ищет учетные данные в `Nuget.Config` файлов.
1. Затем NuGet использует поставщики подключаемый модуль учетных данных, может быть порядке, указанном ниже. (И пример является [Visual Studio Team Services учетных данных Provider](https://www.visualstudio.com/docs/package/get-started/nuget/auth#vsts-credential-provider).)
1. Затем NuGet запрашивает у пользователя учетные данные в командной строке.

Обратите внимание, что поставщики учетных данных описанные здесь работает только в `nuget.exe` , а не в Visual Studio или «dotnet восстановления». Поставщики учетных данных с помощью Visual Studio, в разделе [nuget.exe поставщиков учетных данных для Visual Studio](nuget-credential-providers-for-visual-studio.md)

NuGet.exe поставщиков учетных данных можно использовать в тремя способами:

- **Глобально**: чтобы сделать доступными для всех экземпляров поставщика учетных данных `nuget.exe` запустите профиля текущего пользователя, добавьте ее в `%LocalAppData%\NuGet\CredentialProviders`. Может потребоваться создать `CredentialProviders` папку. Поставщики учетных данных можно установить в корне `CredentialProviders` папки или вложенной папки. Если поставщик учетных данных содержит несколько файлов и сборок, можно использовать вложенные папки для сохранения организованы поставщиков.

- **Из переменной среды**: поставщиков учетных данных можно хранить в любом месте и получить доступ к ним `nuget.exe` , установив `%NUGET_CREDENTIALPROVIDERS_PATH%` переменную среды, чтобы расположение поставщика. Эта переменная может быть список разделенных точкой с запятой (например, `path1;path2`) Если у вас есть несколько расположений.

- **Наряду с nuget.exe**: nuget.exe поставщиков учетных данных может размещаться в той же папке, что `nuget.exe`.

При загрузке поставщиков учетных данных, `nuget.exe` поиск вышеуказанных местах в указанном порядке, для любого файла с именем `credentialprovider*.exe`, затем загружает их в порядке, они были найдены. Если несколько поставщиков учетных данных в той же папке, они загружаются в алфавитном порядке.

## <a name="creating-a-nugetexe-credential-provider"></a>Создание поставщика учетных данных nuget.exe

Поставщик учетных данных — исполняемый файл командной строки с именем в форме `CredentialProvider*.exe`, собирает входных данных получает учетные данные, соответствующие и затем возвращает код состояния соответствующие выхода и стандартные выходные данные.

Поставщик должен выполнить следующее:

- Определите ли его можно указать учетные данные для целевого URI перед запуском процесса получения учетных данных. В противном случае возвращается код состояния 1 без учетных данных.
- Не изменяйте `Nuget.Config` (например, существует задание учетных данных).
- Конфигурация прокси-сервера HTTP дескриптор в себе, как NuGet не предоставляет сведения о прокси подключаемого модуля.
- Возвращает учетные данные или сведения об ошибке для `nuget.exe` путем написания объект ответа JSON (см. ниже) в stdout, в кодировке UTF-8.
- При необходимости выдает ведения журнала трассировки дополнительных в stderr. Не секреты никогда не должны быть написаны в stderr, так как на уровнях детализации «нормальный» или «подробный» такие трассировки передаются по NuGet консоль.
- Неожиданных значений параметров можно пропустить, предоставляя прямой совместимости с будущими версиями NuGet.

### <a name="input-parameters"></a>Входные параметры

| Параметр переключатель / |Описание:|
|----------------|-----------|
| URI {value} | Требовать учетные данные URI источника пакета.|
| Неинтерактивные | Если он имеется, поставщик не выдает интерактивные запросы. |
| IsRetry | Если он присутствует, указывает эта попытка повтора ранее неудавшихся попыток. Поставщики обычно используют этот флаг, чтобы они обхода любого существующего кэша и запрашивать новые учетные данные, если это возможно.|
| Уровень детализации {value} | Если он имеется, одно из следующих значений: «обычный», «тихом» или «подробно». Если значение не указано, по умолчанию на «normal». Поставщики должны использовать это как значение, указывающее уровень ведения журнала необязательно для вывода стандартный поток ошибок. |

### <a name="exit-codes"></a>Коды завершения

| Код |Результат | Описание: |
|----------------|-----------|-----------|
| 0 | Success | Учетные данные были успешно получены и были записаны в stdout.|
| 1 | ProviderNotApplicable | Текущий поставщик не предоставляет учетные данные для указанного URI.|
| 2 | Failure | Поставщик — это правильный поставщик для заданного URI, но не может предоставить учетные данные. В этом случае nuget.exe не повторяет проверку подлинности и завершится ошибкой. Типичный пример — когда пользователь отменяет интерактивного входа в систему. |

### <a name="standard-output"></a>Стандартный вывод

| Свойство. |Примечания|
|----------------|-----------|
| Имя пользователя | Имя пользователя для запросов проверки подлинности.|
| Пароль | Пароль для запросов проверки подлинности.|
| Сообщение | Дополнительные сведения об ответе, используется только для отображения дополнительных сведений в случае сбоя. |

Пример stdout:

    { "Username" : "freddy@example.com",
      "Password" : "bwm3bcx6txhprzmxhl2x63mdsul6grctazoomtdb6kfbof7m3a3z",
      "Message"  : "" }

## <a name="troubleshooting-a-credential-provider"></a>Устранение неполадок поставщика учетных данных

В настоящее NuGet не поддерживает много непосредственно для отладки поставщики пользовательских учетных данных; [выдавать 4598](https://github.com/NuGet/Home/issues/4598) отслеживает эту работу.

Можно выполнить следующие действия:

- Запустите nuget.exe с `-verbosity` коммутатора, чтобы просмотреть подробные выходные данные.
- Добавлять сообщения отладки `stdout` в соответствующих местах.
- Убедитесь, что вы используете nuget.exe 3.3 или более поздней версии.
- Присоедините отладчик при запуске следующим фрагментом кода:

    ```cs
    while (!Debugger.IsAttached)
    {
        System.Threading.Thread.Sleep(100);
    }
    Debugger.Break();
    ```

Для получения дополнительных сведений [отправить запрос на поддержку nuget.org](https://www.nuget.org/policies/Contact).

---
title: Подписанные пакеты
description: Требования для подписывания пакета NuGet.
author: rido-min
ms.author: rmpablos
manager: unnir
ms.date: 05/18/2018
ms.topic: reference
ms.reviewer: ananguar
ms.openlocfilehash: 992097281e21cd8cf37edf67fb1968b70c2b359b
ms.sourcegitcommit: e9c58dbfc1af2876337dcc37b1b070e8ddec0388
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/09/2018
ms.locfileid: "40020522"
---
# <a name="signed-packages"></a>Подписанные пакеты

*NuGet 4.6.0+ и Visual Studio 2017 версии 15.6 и более поздние версии*

Пакеты NuGet могут включать цифровую подпись, которая обеспечивает защиту от поддельных содержимого. Эта подпись, созданного из сертификата X.509, который также добавляет подлинность экспериментов на фактический источник пакета.

Подписанные пакеты обеспечивают надежную проверку end-to-end. Существует два вида подписи NuGet:
- **Создание подписи**. Сигнатура автор гарантирует, что пакет не был изменен, так как автор подписи пакета, независимо от того, из которой репозиторий или что транспорта метод пакет доставляется. Кроме того автор подписанные пакеты предоставляют механизм дополнительную проверку подлинности в конвейер публикации nuget.org, так как сертификат для подписи должны быть зарегистрированы заранее. Дополнительные сведения см. в разделе [регистрации сертификатов,](#register-certificate-on-nugetorg).
- **Подпись репозитория**. Репозиторий подписи гарантируется целостность для **все** пакетов в репозитории, являются ли они автор знаком или без, даже если эти пакеты извлекаются из исходного репозитория, где они находились в другое место со знаком.   

Дополнительные сведения о создании подписанных пакетов автора, см. в разделе [подписи пакетов](../create-packages/Sign-a-package.md) и [команда nuget входа](../tools/cli-ref-sign.md).

> [!Important]
> Подписание пакета в настоящее время поддерживается только в том случае, при использовании nuget.exe на Windows. Проверка подписанных пакетов в настоящее время поддерживается только в том случае, если с помощью Visual Studio или nuget.exe в Windows.

## <a name="certificate-requirements"></a>Требования к сертификатам

Подписание пакета требует сертификата, который — это специальный тип сертификата, который является допустимым для подписи кода `id-kp-codeSigning` назначения [[RFC 5280 разделе 4.2.1.12](https://tools.ietf.org/html/rfc5280#section-4.2.1.12)]. Кроме того сертификат должен иметь RSA длина открытого ключа 2048 бит или более поздней версии.

## <a name="get-a-code-signing-certificate"></a>Получение сертификата подписи кода

Действительные сертификаты может быть получен из общедоступного ЦС, например:

- [Symantec](https://trustcenter.websecurity.symantec.com/process/trust/productOptions?productType=SoftwareValidationClass3)
- [DigiCert](https://www.digicert.com/code-signing/)
- [Go Daddy](https://www.godaddy.com/web-security/code-signing-certificate)
- [Глобальные входа](https://www.globalsign.com/en/code-signing-certificate/)
- [Comodo](https://www.comodo.com/e-commerce/code-signing/code-signing-certificate.php)
- [Certum](https://www.certum.eu/certum/cert,offer_en_open_source_cs.xml) 

Полный список центров сертификации, доверенным для Windows можно получить из [ http://aka.ms/trustcertpartners ](http://aka.ms/trustcertpartners).

## <a name="create-a-test-certificate"></a>Создание тестового сертификата

Для целей тестирования можно использовать самостоятельно выданные сертификаты. Чтобы создать самостоятельно выданный сертификат, используйте [команду PowerShell New-SelfSignedCertificate](/powershell/module/pkiclient/new-selfsignedcertificate.md).

```ps
New-SelfSignedCertificate -Subject "CN=NuGet Test Developer, OU=Use for testing purposes ONLY" `
                          -FriendlyName "NuGetTestDeveloper" `
                          -Type CodeSigning `
                          -KeyUsage DigitalSignature `
                          -KeyLength 2048 `
                          -KeyAlgorithm RSA `
                          -HashAlgorithm SHA256 `
                          -Provider "Microsoft Enhanced RSA and AES Cryptographic Provider" `
                          -CertStoreLocation "Cert:\CurrentUser\My" 
```

Эта команда создает сертификат тестирования, доступный в хранилище личных сертификатов текущего пользователя. Можно открыть хранилище сертификатов, выполнив `certmgr.msc` для просмотра только что созданный сертификат.

> [!Warning]
> NuGet.org не принимает пакеты, подписанные самостоятельно выданные сертификаты.

## <a name="timestamp-requirements"></a>Требования к отметки времени

Подписанные пакеты должны включать отметку времени RFC 3161 чтобы обеспечить достоверность подписи за пределы периода действия сертификата подписи пакета. Сертификат, используемый для подписи отметку времени должен быть допустимым для `id-kp-timeStamping` назначения [[RFC 5280 разделе 4.2.1.12](https://tools.ietf.org/html/rfc5280#section-4.2.1.12)]. Кроме того сертификат должен иметь RSA длина открытого ключа 2048 бит или более поздней версии.

Дополнительные технические сведения можно найти в [пакет подпись технические спецификации](https://github.com/NuGet/Home/wiki/Package-Signatures-Technical-Details) (GitHub).

## <a name="signature-requirements-on-nugetorg"></a>Требования к подписи на сайте nuget.org

NuGet.org имеет дополнительные требования к выполнению подписанных пакетов:

- Основная подпись должен быть подпись автора.
- Основная подпись должны иметь допустимую метку времени.
- Сертификаты X.509 для подписи автора и его подпись метка времени:
  - Должен иметь открытый ключ RSA 2048 бит или более поздней версии.
  - Должен находиться в пределах срока его действия на текущее время в формате UTC во время проверки пакета на сайте nuget.org.
  - Необходимо объединить в цепочку с доверенным корневым центром сертификации, считается надежным по умолчанию в Windows. Пакеты, подписанные с помощью самостоятельно выданные сертификаты отклоняются.
  - Должен быть допустимым для его цели: 
    - Сертификат для подписи автор должен быть допустимым для подписывания кода.
    - Метка времени сертификат должен быть непригоден для.
  - Не должен быть отозван в времени подписи. (Это может не быть knowable во время отправки, поэтому nuget.org периодически проверяет состояние отзыва).

## <a name="register-certificate-on-nugetorg"></a>Регистрация сертификата на сайте nuget.org

Для отправки подписанных пакетов, необходимо сначала зарегистрировать сертификат с сайта nuget.org. Вам потребуется сертификат как `.cer` файл в двоичном DER-формате. Существующий сертификат можно экспортировать в двоичном DER-формате с помощью мастера экспорта сертификатов.

![Мастер экспорта сертификатов](media/CertificateExportWizard.png)

Опытные пользователи могут экспортировать сертификат с помощью [команду PowerShell для экспорта сертификата](/powershell/module/pkiclient/export-certificate.md).

Чтобы зарегистрировать сертификат с сайта nuget.org, перейдите к статье `Certificates` разделе `Account settings` страницы (или организации на странице "Параметры") и выберите `Register new certificate`.

![Зарегистрированных сертификатов](media/registered-certs.png)

> [!Tip]
> Один пользователь может отправить несколько сертификатов и тот же сертификат можно зарегистрировать несколько пользователей.

Имеющийся у пользователя сертификат зарегистрирован, пакет будущих передачу **необходимо** быть подписаны с помощью одного из сертификатов.

Пользователи также могут удалять зарегистрированный сертификат из учетной записи. После удаления сертификата во отправки сбой пакеты, подписанные этим сертификатом. Существующие пакеты не затрагиваются.

## <a name="configure-package-signing-requirements"></a>Настройка требований для подписи пакета

Если вы являетесь единственным владельцем пакета, не требуется подписавшего. То есть можно использовать любой из зарегистрированных сертификатов для подписывания пакетов и отправки на сайте nuget.org.

Если пакет содержит несколько владельцев по умолчанию, «Любой» владелец сертификаты могут использоваться для подписи пакета. Как владелец пакета можно переопределить «Любой» с самостоятельно или любые другие совладелец быть требуется подписавшего. Если владелец, который не поддерживает любой сертификат, зарегистрированный, неподписанных пакетов разрешается. 

Аналогичным образом, если для пакета, где один владелец имеет сертификат, зарегистрированный и другого владельца выбран «Any» параметр по умолчанию не имеет любой сертификат, зарегистрированный, затем nuget.org принимает подписанных пакетов с сигнатурой, зарегистрированные с одним из владельцев или Неподписанный пакет (так как один из владельцев имеет любой сертификат, зарегистрированный).

![Настройка пакета подписавших](media/configure-package-signers.png)

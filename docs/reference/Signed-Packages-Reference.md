---
title: Подписанные пакеты
description: Требования для подписания пакета NuGet.
author: rido-min
ms.author: rmpablos
manager: unnir
ms.date: 05/18/2018
ms.topic: reference
ms.reviewer: ananguar
ms.openlocfilehash: 72fb1a87c13160c53f632d2ef87a12a4e9bc02a3
ms.sourcegitcommit: 8127dd73ff8481a1a01acd9b7004dd131a9d84e7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/22/2018
---
# <a name="signed-packages"></a>Подписанные пакеты

*NuGet 4.6.0+ и Visual Studio 2017 г 15.6 и более поздних версий*

Пакеты NuGet можно включить цифровую подпись, которая обеспечивает защиту от поддельных содержимого. Эта подпись создается из сертификата X.509, который также добавляет экспериментов подлинность фактического источника пакета.

Подписанные пакеты обеспечивают надежную проверку начала до конца. Сигнатура автор гарантирует, что пакет не был изменен с момента автор подписи пакета, независимо от того, из которой репозитория или что транспорта метод доставки пакета.

Кроме того автор подписи пакетов предоставляют механизм дополнительную проверку подлинности в конвейер публикации nuget.org из-за сертификата для подписи должны быть зарегистрированы заранее. Дополнительные сведения см. в разделе [регистрация сертификатов](#register-certificate-on-nugetorg).

Дополнительные сведения о создании подписанного пакета см. в разделе [подписи пакетов](../create-packages/Sign-a-package.md) и [входа команды nuget](../tools/cli-ref-sign.md).

> [!Important]
> Подписание пакета в настоящее время поддерживается только при использовании nuget.exe в Windows. Проверка подписанных пакетов в настоящее время поддерживается только при использовании nuget.exe или Visual Studio в Windows.

## <a name="certificate-requirements"></a>Требования к сертификатам

Подписание пакета требуется сертификат, который — это специальный тип сертификата, который является допустимым для подписи кода `id-kp-codeSigning` цель [[RFC 5280 раздел 4.2.1.12](https://tools.ietf.org/html/rfc5280#section-4.2.1.12)]. Кроме того сертификат должен иметь RSA длина открытого ключа 2048 бит или более поздней версии.

## <a name="get-a-code-signing-certificate"></a>Получить сертификат подписи кода

Действительные сертификаты могут быть получены из центра сертификации, например:

- [Symantec](https://trustcenter.websecurity.symantec.com/process/trust/productOptions?productType=SoftwareValidationClass3)
- [DigiCert](https://www.digicert.com/code-signing/)
- [Go Daddy](https://www.godaddy.com/web-security/code-signing-certificate)
- [Глобальные входа](https://www.globalsign.com/en/code-signing-certificate/)
- [Comodo](https://www.comodo.com/e-commerce/code-signing/code-signing-certificate.php)
- [Certum](https://www.certum.eu/certum/cert,offer_en_open_source_cs.xml) 

Полный список центров сертификации, доверенным для Windows можно получить из [ http://aka.ms/trustcertpartners ](http://aka.ms/trustcertpartners).

## <a name="create-a-test-certificate"></a>Создание тестового сертификата

Самостоятельно выданные сертификаты можно использовать для тестирования. Чтобы создать самостоятельно выданный сертификат, используйте [команду PowerShell New-SelfSignedCertificate](/powershell/module/pkiclient/new-selfsignedcertificate.md).

```ps
New-SelfSignedCertificate -Subject "CN=NuGet Test Developer, OU=Use for testing purposes ONLY" `
                          -FriendlyName "NuGetTestDeveloper" `
                          -Type CodeSigning `
                          -KeyUsage DigitalSignature `
                          -KeyLength 2048 `
                          -KeyAlgorithm RSA `
                          -HashAlgorithm SHA256 `
                          -Provider "Microsoft Enhanced RSA and AES Cryptographic Provider" `
                          -CertStoreLocation "Cert:\CurrentUser\My" 
```

Эта команда создает сертификата тестирования в хранилище персональных сертификатов текущего пользователя. Можно открыть хранилище сертификатов, выполнив `certmgr.msc` для просмотра только что созданный сертификат.

> [!Warning]
> NuGet.org не принимает пакеты подписана самостоятельно выданные сертификаты.

## <a name="timestamp-requirements"></a>Требования к отметки времени

Подписанных пакетов должна включать отметок времени RFC 3161, чтобы обеспечить правильность подписи за пределы периода действия сертификата для подписи пакетов. Сертификат, используемый для подписи отметку времени должен быть допустимым для `id-kp-timeStamping` цель [[RFC 5280 раздел 4.2.1.12](https://tools.ietf.org/html/rfc5280#section-4.2.1.12)]. Кроме того сертификат должен иметь RSA длина открытого ключа 2048 бит или более поздней версии.

Дополнительные технические сведения можно найти в [пакет подпись технические спецификации](https://github.com/NuGet/Home/wiki/Package-Signatures-Technical-Details) (GitHub).

## <a name="signature-requirements-on-nugetorg"></a>Требования к подписи nuget.org

NuGet.org предъявляет требования для принятия подписанных пакетов.

- Основная подпись должно быть сигнатура автора.
- Основная подпись должна иметь допустимую метку времени.
- Сертификаты X.509 для подписи автора и его подпись отметка времени:
  - Должен иметь открытый ключ RSA 2048 бит или больше.
  - Должен быть действителен в настоящее время на текущее время UTC во время проверки пакета на nuget.org.
  - Должен связываться по цепочке доверенным корневым центром сертификации, который является доверенным по умолчанию в Windows. Пакеты, подписанные с самостоятельно выданные сертификаты будут отклонены.
  - Должен быть допустимым для его цели: 
    - Автор сертификат подписи должен быть допустимым для подписи кода.
    - Отметка времени сертификат должен быть непригоден для.
  - Не должны быть отозваны во время подписи. (Это может быть не knowable во время передачи, поэтому nuget.org периодически проверяет состояние отзыва).

## <a name="register-certificate-on-nugetorg"></a>Регистрация сертификата на nuget.org

Для отправки подписанного пакета, необходимо сначала зарегистрировать сертификат с nuget.org. Вам понадобится сертификат как `.cer` файл в двоичном формате DER. С помощью мастера экспорта сертификатов можно экспортировать существующий сертификат в двоичном формате DER.

![Мастер экспорта сертификатов](media/CertificateExportWizard.png)

Опытные пользователи могут экспортировать сертификат с помощью [команды PowerShell для экспорта сертификата](/powershell/module/pkiclient/export-certificate.md).

Чтобы зарегистрировать сертификат в nuget.org, перейдите к `Certificates` статьи на `Account settings` (или организации на странице Параметры) и выберите `Register new certificate`.

![Зарегистрированных сертификатов](media/registered-certs.png)

> [!Tip]
> Один пользователь может отправить несколько сертификатов и тот же сертификат можно зарегистрировать несколько пользователей.

Как только пользователь имеет сертификат регистрации передачу пакета будущих **должен** быть подписаны с помощью одного из сертификатов.

Пользователей можно также удалить сертификат, зарегистрированный из учетной записи. После удаления сертификата во отправки сбой пакеты, подписанным этим сертификатом. Не влияет на существующие пакеты.

## <a name="configure-package-signing-requirements"></a>Настройка требований для подписи пакетов

Если вы являетесь единственным владельцем пакета, не требуется подписывающего лица. То есть зарегистрированных сертификатов можно использовать для подписания пакетов и отправки в nuget.org.

Если пакет содержит несколько владельцев по умолчанию, «Любой» владельца сертификаты могут использоваться для подписывания пакета. Как владелец пакета можно переопределить «Любой» с самостоятельно или любые другие совладелец быть обязательным подписывающего лица. При внесении владельца, не имеет сертификата, зарегистрированного неподписанные пакеты будут запрещены. 

Аналогичным образом, если выбран параметр «Любой» пакета, где один владелец имеет сертификат, зарегистрированный и другого владельца по умолчанию не имеет сертификата, зарегистрированного, затем nuget.org принимает подписанного пакета с подписью, зарегистрированные с одним из владельцев или Неподписанный пакет (из-за одного владельцам отсутствует сертификат, зарегистрированный).

![Настройка пакета авторов](media/configure-package-signers.png)

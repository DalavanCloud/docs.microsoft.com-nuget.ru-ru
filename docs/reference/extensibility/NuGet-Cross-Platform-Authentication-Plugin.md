---
title: NuGet cross подключаемый модуль проверки подлинности платформы
description: NuGet cross подключаемые модули проверки подлинности платформы для NuGet.exe, dotnet.exe, msbuild.exe и Visual Studio
author: nkolev92
ms.author: nikolev
ms.date: 07/01/2018
ms.topic: conceptual
ms.openlocfilehash: b76fab1028ec9a4172d2390083fbf9adb4290a6c
ms.sourcegitcommit: 0c5a49ec6e0254a4e7a9d8bca7daeefb853c433a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/28/2018
ms.locfileid: "52453511"
---
# <a name="nuget-cross-platform-authentication-plugin"></a><span data-ttu-id="0aea6-103">NuGet cross подключаемый модуль проверки подлинности платформы</span><span class="sxs-lookup"><span data-stu-id="0aea6-103">NuGet cross platform authentication plugin</span></span>

<span data-ttu-id="0aea6-104">В версии 4.8 +, все NuGet (NuGet.exe, Visual Studio и dotnet.exe или MSBuild.exe) клиентов можно использовать подключаемый модуль проверки подлинности, создаются на основе [NuGet кросс-подключаемые модули платформы](NuGet-Cross-Platform-Plugins.md) модели.</span><span class="sxs-lookup"><span data-stu-id="0aea6-104">In version 4.8+, all NuGet clients (NuGet.exe, Visual Studio, dotnet.exe and MSBuild.exe) can use an authentication plugin built on top of the [NuGet cross platform plugins](NuGet-Cross-Platform-Plugins.md) model.</span></span>

## <a name="authentication-in-dotnetexe"></a><span data-ttu-id="0aea6-105">Проверка подлинности в dotnet.exe</span><span class="sxs-lookup"><span data-stu-id="0aea6-105">Authentication in dotnet.exe</span></span>

<span data-ttu-id="0aea6-106">Visual Studio и NuGet.exe, по умолчанию интерактивный.</span><span class="sxs-lookup"><span data-stu-id="0aea6-106">Visual Studio and NuGet.exe are by default interactive.</span></span> <span data-ttu-id="0aea6-107">NuGet.exe содержит параметр, позволяющий сделать ее [неинтерактивной](../../tools/nuget-exe-CLI-Reference.md).</span><span class="sxs-lookup"><span data-stu-id="0aea6-107">NuGet.exe contains a switch to make it [non interactive](../../tools/nuget-exe-CLI-Reference.md).</span></span>
<span data-ttu-id="0aea6-108">Кроме того, подключаемые модули NuGet.exe и Visual Studio запрос ввода данных пользователем.</span><span class="sxs-lookup"><span data-stu-id="0aea6-108">Additionally the NuGet.exe and Visual Studio plugins prompt the user for input.</span></span>
<span data-ttu-id="0aea6-109">В dotnet.exe без запроса и значение по умолчанию неинтерактивной.</span><span class="sxs-lookup"><span data-stu-id="0aea6-109">In dotnet.exe there is no prompting and the default is non interactive.</span></span>

<span data-ttu-id="0aea6-110">Механизм проверки подлинности в dotnet.exe приведена последовательность действий устройства.</span><span class="sxs-lookup"><span data-stu-id="0aea6-110">The authentication mechanism in dotnet.exe is device flow.</span></span> <span data-ttu-id="0aea6-111">При восстановлении или добавить пакет операция выполняется в интерактивном режиме, операция блокирует и инструкции для пользователя, как для завершения проверки подлинности будет предоставляться в командной строке.</span><span class="sxs-lookup"><span data-stu-id="0aea6-111">When the restore or add package operation is run interactively, the operation blocks and instructions to the user how to complete the authentications will be provided on the command line.</span></span>
<span data-ttu-id="0aea6-112">Когда пользователь завершает проверку подлинности операция будет продолжена.</span><span class="sxs-lookup"><span data-stu-id="0aea6-112">When the user completes the authentication the operation will continue.</span></span>

<span data-ttu-id="0aea6-113">Чтобы операция интерактивный, один следует передать `--interactive`.</span><span class="sxs-lookup"><span data-stu-id="0aea6-113">To make the operation interactive, one should pass `--interactive`.</span></span>
<span data-ttu-id="0aea6-114">В настоящее время только явный `dotnet restore` и `dotnet add package` команды поддерживают интерактивный коммутатору.</span><span class="sxs-lookup"><span data-stu-id="0aea6-114">Currently only the explicit `dotnet restore` and `dotnet add package` commands support an interactive switch.</span></span>
<span data-ttu-id="0aea6-115">Отсутствует переключение не интерактивных на `dotnet build` и `dotnet publish`.</span><span class="sxs-lookup"><span data-stu-id="0aea6-115">There is no interactive switch on `dotnet build` and `dotnet publish`.</span></span>

## <a name="authentication-in-msbuild"></a><span data-ttu-id="0aea6-116">Проверка подлинности в MSBuild</span><span class="sxs-lookup"><span data-stu-id="0aea6-116">Authentication in MSBuild</span></span>

<span data-ttu-id="0aea6-117">Как dotnet.exe, MSBuild.exe — по умолчанию, без интерактивного MSBuild.exe проверки подлинности используется поток устройств.</span><span class="sxs-lookup"><span data-stu-id="0aea6-117">Similar to dotnet.exe, MSBuild.exe is by default non interactive the MSBuild.exe authentication mechanism is device flow.</span></span>
<span data-ttu-id="0aea6-118">Чтобы разрешить восстановление для приостановки и ожидания для проверки подлинности, вызовите восстановление с помощью `msbuild -t:restore -p:NuGetInteractive="true"`.</span><span class="sxs-lookup"><span data-stu-id="0aea6-118">To allow the restore to pause and wait for authentication, call restore with `msbuild -t:restore -p:NuGetInteractive="true"`.</span></span>

## <a name="creating-a-cross-platform-authentication-plugin"></a><span data-ttu-id="0aea6-119">Создание кроссплатформенный подключаемый модуль проверки подлинности</span><span class="sxs-lookup"><span data-stu-id="0aea6-119">Creating a cross platform authentication plugin</span></span>

<span data-ttu-id="0aea6-120">Пример реализации можно найти в [подключаемый модуль поставщика учетных данных Microsoft](https://github.com/Microsoft/artifacts-credprovider).</span><span class="sxs-lookup"><span data-stu-id="0aea6-120">A sample implementation can be found in [Microsoft Credential Provider plugin](https://github.com/Microsoft/artifacts-credprovider).</span></span>

<span data-ttu-id="0aea6-121">Очень важно соответствие требованиям безопасности, установленных клиентских средств NuGet подключаемые модули.</span><span class="sxs-lookup"><span data-stu-id="0aea6-121">It's very important that the plugins conforms to the security requirements set forth by the NuGet client tools.</span></span>
<span data-ttu-id="0aea6-122">Минимальная требуемая версия для подключаемого модуля требуется подключаемый модуль проверки подлинности — *2.0.0*.</span><span class="sxs-lookup"><span data-stu-id="0aea6-122">The minimum required version for a plugin to be an authentication plugin is *2.0.0*.</span></span>
<span data-ttu-id="0aea6-123">NuGet выполняет подтверждения с помощью подключаемого модуля, а запрос для утверждения поддерживаемой операцией.</span><span class="sxs-lookup"><span data-stu-id="0aea6-123">NuGet will perform the handshake with the plugin and query for the supported operation claims.</span></span>
<span data-ttu-id="0aea6-124">Обратитесь к NuGet кросс-подключаемый модуль платформы [сообщения по протоколу](NuGet-Cross-Platform-Plugins.md#protocol-messages-index) Дополнительные сведения о конкретных сообщениях.</span><span class="sxs-lookup"><span data-stu-id="0aea6-124">Please refer to the NuGet cross platform plugin [protocol messages](NuGet-Cross-Platform-Plugins.md#protocol-messages-index) for more details about the specific messages.</span></span>

<span data-ttu-id="0aea6-125">NuGet будет задайте уровень ведения журнала и укажите данные прокси-сервера в подключаемый модуль, в зависимости от ситуации.</span><span class="sxs-lookup"><span data-stu-id="0aea6-125">NuGet will set the log level and provide proxy information to the plugin when applicable.</span></span>
<span data-ttu-id="0aea6-126">Ведение журнала для NuGet консоли допустимо только уровень ведения журнала, настроив NuGet подключаемого модуля.</span><span class="sxs-lookup"><span data-stu-id="0aea6-126">Logging to the NuGet console is only acceptable after NuGet has set the log level to the plugin.</span></span>

- <span data-ttu-id="0aea6-127">Поведение проверки подлинности подключаемый модуль .NET framework</span><span class="sxs-lookup"><span data-stu-id="0aea6-127">.NET Framework plugin authentication behavior</span></span>

<span data-ttu-id="0aea6-128">В .NET Framework подключаемые модули могут запрашивать у пользователя входных данных, в форме диалогового окна.</span><span class="sxs-lookup"><span data-stu-id="0aea6-128">In .NET Framework, the plugins are allowed to prompt a user for input, in the form of a dialog.</span></span>

- <span data-ttu-id="0aea6-129">Поведение проверки подлинности подключаемый модуль .NET core</span><span class="sxs-lookup"><span data-stu-id="0aea6-129">.NET Core plugin authentication behavior</span></span>

<span data-ttu-id="0aea6-130">В .NET Core не удалось отобразить диалоговое окно.</span><span class="sxs-lookup"><span data-stu-id="0aea6-130">In .NET Core, a dialog cannot be shown.</span></span> <span data-ttu-id="0aea6-131">Подключаемые модули должны использовать поток устройства для проверки подлинности.</span><span class="sxs-lookup"><span data-stu-id="0aea6-131">The plugins should use device flow to authenticate.</span></span>
<span data-ttu-id="0aea6-132">Подключаемый модуль можно отправлять сообщения в журнале NuGet с инструкциями для пользователя.</span><span class="sxs-lookup"><span data-stu-id="0aea6-132">The plugin can send log messages to NuGet with instructions to the user.</span></span>
<span data-ttu-id="0aea6-133">Обратите внимание на то, что ведение журнала доступно после задания уровень ведения журнала в подключаемый модуль.</span><span class="sxs-lookup"><span data-stu-id="0aea6-133">Note that logging is available after the log level has been set to the plugin.</span></span>
<span data-ttu-id="0aea6-134">NuGet не вступят в интерактивный ввод данных из командной строки.</span><span class="sxs-lookup"><span data-stu-id="0aea6-134">NuGet will not take any interactive input from the command line.</span></span>

<span data-ttu-id="0aea6-135">Когда клиент вызывает подключаемый модуль с помощью получить учетные данные проверки подлинности, подключаемые модули должны соответствовать коммутатора интерактивные возможности и учитывают параметр диалоговое окно.</span><span class="sxs-lookup"><span data-stu-id="0aea6-135">When the client calls the plugin with a Get Authentication Credentials, the plugins need to conform to the interactivity switch and respect the dialog switch.</span></span> 

<span data-ttu-id="0aea6-136">В следующей таблице перечислены поведение подключаемый модуль для всех сочетаний.</span><span class="sxs-lookup"><span data-stu-id="0aea6-136">The following table summarizes how the plugin should behave for all combinations.</span></span>

| <span data-ttu-id="0aea6-137">IsNonInteractive</span><span class="sxs-lookup"><span data-stu-id="0aea6-137">IsNonInteractive</span></span> | <span data-ttu-id="0aea6-138">CanShowDialog</span><span class="sxs-lookup"><span data-stu-id="0aea6-138">CanShowDialog</span></span> | <span data-ttu-id="0aea6-139">Поведение подключаемого модуля</span><span class="sxs-lookup"><span data-stu-id="0aea6-139">Plugin behavior</span></span> |
| ---------------- | ------------- | --------------- |
| <span data-ttu-id="0aea6-140">true</span><span class="sxs-lookup"><span data-stu-id="0aea6-140">true</span></span> | <span data-ttu-id="0aea6-141">true</span><span class="sxs-lookup"><span data-stu-id="0aea6-141">true</span></span> | <span data-ttu-id="0aea6-142">Параметр IsNonInteractive имеет приоритет над параметром диалоговое окно.</span><span class="sxs-lookup"><span data-stu-id="0aea6-142">The IsNonInteractive switch takes precedence over the dialog switch.</span></span> <span data-ttu-id="0aea6-143">Подключаемый модуль не допускается для вывода диалогового окна.</span><span class="sxs-lookup"><span data-stu-id="0aea6-143">The plugin is not allowed to pop a dialog.</span></span> <span data-ttu-id="0aea6-144">Это сочетание допустим только для подключаемых модулей .NET Framework</span><span class="sxs-lookup"><span data-stu-id="0aea6-144">This combination is only valid for .NET Framework plugins</span></span> |
| <span data-ttu-id="0aea6-145">true</span><span class="sxs-lookup"><span data-stu-id="0aea6-145">true</span></span> | <span data-ttu-id="0aea6-146">False</span><span class="sxs-lookup"><span data-stu-id="0aea6-146">false</span></span> | <span data-ttu-id="0aea6-147">Параметр IsNonInteractive имеет приоритет над параметром диалоговое окно.</span><span class="sxs-lookup"><span data-stu-id="0aea6-147">The IsNonInteractive switch takes precedence over the dialog switch.</span></span> <span data-ttu-id="0aea6-148">Подключаемый модуль не допускается для блокировки.</span><span class="sxs-lookup"><span data-stu-id="0aea6-148">The plugin is not allowed to block.</span></span> <span data-ttu-id="0aea6-149">Это сочетание допустим только для подключаемых модулей .NET Core</span><span class="sxs-lookup"><span data-stu-id="0aea6-149">This combination is only valid for .NET Core plugins</span></span> |
| <span data-ttu-id="0aea6-150">False</span><span class="sxs-lookup"><span data-stu-id="0aea6-150">false</span></span> | <span data-ttu-id="0aea6-151">true</span><span class="sxs-lookup"><span data-stu-id="0aea6-151">true</span></span> | <span data-ttu-id="0aea6-152">Подключаемый модуль должен показать диалоговое окно.</span><span class="sxs-lookup"><span data-stu-id="0aea6-152">The plugin should show a dialog.</span></span> <span data-ttu-id="0aea6-153">Это сочетание допустим только для подключаемых модулей .NET Framework</span><span class="sxs-lookup"><span data-stu-id="0aea6-153">This combination is only valid for .NET Framework plugins</span></span> |
| <span data-ttu-id="0aea6-154">False</span><span class="sxs-lookup"><span data-stu-id="0aea6-154">false</span></span> | <span data-ttu-id="0aea6-155">False</span><span class="sxs-lookup"><span data-stu-id="0aea6-155">false</span></span> | <span data-ttu-id="0aea6-156">Подключаемый модуль должен или может не отображать диалоговое окно.</span><span class="sxs-lookup"><span data-stu-id="0aea6-156">The plugin should/can not show a dialog.</span></span> <span data-ttu-id="0aea6-157">Подключаемый модуль должны использовать поток устройства для проверки подлинности, войдя в сообщение инструкции с помощью средства ведения журнала.</span><span class="sxs-lookup"><span data-stu-id="0aea6-157">The plugin should use device flow to authenticate by logging an instruction message via the logger.</span></span> <span data-ttu-id="0aea6-158">Это сочетание допустим только для подключаемых модулей .NET Core</span><span class="sxs-lookup"><span data-stu-id="0aea6-158">This combination is only valid for .NET Core plugins</span></span> |

<span data-ttu-id="0aea6-159">См. следующие технические характеристики перед записью подключаемого модуля.</span><span class="sxs-lookup"><span data-stu-id="0aea6-159">Please refer to the following specs before writing a plugin.</span></span>

- [<span data-ttu-id="0aea6-160">Подключаемый модуль для загрузки пакета NuGet</span><span class="sxs-lookup"><span data-stu-id="0aea6-160">NuGet Package Download Plugin</span></span>](https://github.com/NuGet/Home/wiki/NuGet-Package-Download-Plugin)
- [<span data-ttu-id="0aea6-161">NuGet кросс-Платформенная надстройка проверки подлинности</span><span class="sxs-lookup"><span data-stu-id="0aea6-161">NuGet cross plat authentication plugin</span></span>](https://github.com/NuGet/Home/wiki/NuGet-cross-plat-authentication-plugin)

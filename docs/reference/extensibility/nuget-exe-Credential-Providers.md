---
title: Поставщики учетных данных NuGet.exe
description: поставщики учетных данных NuGet.exe проверку подлинности с помощью веб-канал и реализуются как исполняемые файлы командной строки, соответствующие определенной соглашениям.
author: karann-msft
ms.author: karann
ms.date: 12/12/2017
ms.topic: conceptual
ms.openlocfilehash: 97a44c6d561f426fa50fa068a9bbf793f77a3111
ms.sourcegitcommit: 1d1406764c6af5fb7801d462e0c4afc9092fa569
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/04/2018
ms.locfileid: "43550193"
---
# <a name="authenticating-feeds-with-nugetexe-credential-providers"></a>Проверка подлинности веб-каналов с помощью поставщиков учетных данных nuget.exe

*NuGet 3.3 +*

Когда `nuget.exe` нужны учетные данные для проверки подлинности с помощью веб-канал, он ищет их следующим образом:

1. NuGet сначала ищет учетные данные в `Nuget.Config` файлов.
1. NuGet использует поставщики подключаемый модуль учетных данных, применяются в указанном ниже порядке. (И пример — [Visual Studio Team Services Credential Provider](https://www.visualstudio.com/docs/package/get-started/nuget/auth#vsts-credential-provider).)
1. NuGet затем предлагает пользователю ввести учетные данные в командной строке.

Обратите внимание, что поставщики учетных данных, описанные здесь работать только в `nuget.exe` , а не в «dotnet restore» или Visual Studio. Поставщики учетных данных с помощью Visual Studio, см. в разделе [nuget.exe поставщики учетных данных для Visual Studio](nuget-credential-providers-for-visual-studio.md)

поставщики учетных данных NuGet.exe может использоваться в тремя способами:

- **Глобально**: чтобы сделать доступными для всех экземпляров поставщика учетных данных `nuget.exe` запустите профиля текущего пользователя, добавьте ее в `%LocalAppData%\NuGet\CredentialProviders`. Может потребоваться создать `CredentialProviders` папку. Поставщики учетных данных, которые могут устанавливаться в корне `CredentialProviders` папки или вложенной папки. Если поставщик учетных данных содержит несколько файлов и сборок, можно использовать вложенные папки для сохранения упорядоченных поставщиков.

- **Из переменной среды**: поставщики учетных данных можно хранить где угодно и получить доступ к ним `nuget.exe` , задав `%NUGET_CREDENTIALPROVIDERS_PATH%` переменную среды, чтобы расположение поставщика. Эта переменная может быть список разделенных точкой с запятой (например, `path1;path2`) при наличии нескольких расположениях.

- **Наряду с nuget.exe**: поставщики учетных данных nuget.exe может размещаться в той же папке, что `nuget.exe`.

При загрузке поставщиков учетных данных, `nuget.exe` осуществляет выше расположения, чтобы все файлы с именем `credentialprovider*.exe`, затем загружает их в порядке, они будут обнаружены. Если несколько поставщиков учетных данных существует в той же папке, они загружены в алфавитном порядке.

## <a name="creating-a-nugetexe-credential-provider"></a>Создание поставщика учетных данных nuget.exe

Поставщик учетных данных — это исполняемый файл командной строки с именем в форме `CredentialProvider*.exe`, собирает входные данные, получает учетные данные, соответствующие и затем возвращает код состояния соответствующие выхода и стандартный вывод.

Поставщик должен выполнить следующее:

- Определите, может ли его предоставлять учетные данные для целевого URI перед запуском получение учетных данных. В противном случае он должен вернуть код состояния 1 без учетных данных.
- Не изменяйте `Nuget.Config` (например, при настройке учетных данных существует).
- Конфигурация прокси-сервера HTTP дескриптор в отдельно, как NuGet не поддерживает данные прокси-сервера в подключаемый модуль.
- Возвращает учетные данные или сведений об ошибках `nuget.exe` , написав объект ответа JSON (см. ниже) в stdout, используя кодировку UTF-8.
- Дополнительно генерировать ведение журнала дополнительных трассировки в stderr. Секреты не когда-нибудь должны записываться в stderr, так как на уровнях детализации «обычный» или «подробный» такие трассировки передаются с NuGet в консоль.
- Непредвиденный параметр можно пропустить, предоставляя прямой совместимостью с будущими версиями NuGet.

### <a name="input-parameters"></a>Входные параметры

| Параметр/Switch |Описание|
|----------------|-----------|
| URI {value} | Пакет источника URI, требующих учетных данных.|
| Неинтерактивная | Если он имеется, поставщик не создает интерактивные запросы. |
| isRetry | Если имеется, указывает, что эта попытка окажется при повторной попытке ранее неудачной попытки. Поставщики обычно используют этот флаг для убедитесь, что обход любого существующего кэша и запрашивать новые учетные данные, если это возможно.|
| Уровень детализации {value} | Если он имеется, одно из следующих значений: «обычный», «quiet» или «подробно». Если значение не задано, по умолчанию на «normal». Поставщики должны использовать это для указания уровня необязательно ведения журнала для вывода стандартный поток ошибок. |

### <a name="exit-codes"></a>Коды выхода

| Код |Результат | Описание |
|----------------|-----------|-----------|
| 0 | Success | Учетные данные были успешно получены и были записаны в поток stdout.|
| 1 | ProviderNotApplicable | Текущий поставщик не поддерживает учетные данные для указанного URI.|
| 2 | Failure | Поставщик является то подходящий поставщик для указанного URI, но не может предоставить учетные данные. В этом случае nuget.exe не повторит попытку проверки подлинности и завершится ошибкой. Типичный пример — когда пользователь отменяет интерактивного входа в систему. |

### <a name="standard-output"></a>Стандартный вывод

| Свойство. |Примечания|
|----------------|-----------|
| Имя пользователя | Имя пользователя, прошедшего проверку подлинности запросов.|
| Пароль | Пароль для запросов с проверкой подлинности.|
| Сообщение | Дополнительные сведения об ответе, используется только для того, для отображения дополнительных сведений в случае сбоя. |

Пример stdout:

    { "Username" : "freddy@example.com",
      "Password" : "bwm3bcx6txhprzmxhl2x63mdsul6grctazoomtdb6kfbof7m3a3z",
      "Message"  : "" }

## <a name="troubleshooting-a-credential-provider"></a>Устранение неполадок поставщика учетных данных

В настоящее время NuGet не обеспечивает серьезной прямой поддержки для отладки поставщики пользовательских учетных данных; [выдавать 4598](https://github.com/NuGet/Home/issues/4598) отслеживает эту работу.

Можно выполнить следующие действия:

- Запустите nuget.exe с `-verbosity` коммутатора, чтобы просмотреть подробные выходные данные.
- Добавлять сообщения отладки `stdout` в соответствующих местах.
- Убедитесь, что вы используете nuget.exe 3.3 или более поздней версии.
- Подключите отладчик при запуске следующим фрагментом кода:

    ```cs
    while (!Debugger.IsAttached)
    {
        System.Threading.Thread.Sleep(100);
    }
    Debugger.Break();
    ```

Для получения дополнительных сведений [отправить запрос в службу поддержки nuget.org](https://www.nuget.org/policies/Contact).

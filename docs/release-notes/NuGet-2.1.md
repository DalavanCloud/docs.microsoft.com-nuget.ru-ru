---
title: Заметки о выпуске 2.1 NuGet
description: Заметки о выпуске для NuGet 2.1, включая известные проблемы, исправления ошибок, добавленные функции и запросы на изменение структуры.
author: karann-msft
ms.author: karann
ms.date: 11/11/2016
ms.topic: conceptual
ms.openlocfilehash: fd6dadc7968991c77c1b06a6a261415355b2fd73
ms.sourcegitcommit: 1d1406764c6af5fb7801d462e0c4afc9092fa569
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/04/2018
ms.locfileid: "43548601"
---
# <a name="nuget-21-release-notes"></a>Заметки о выпуске 2.1 NuGet

[Заметки о выпуске NuGet 2.0](../release-notes/nuget-2.0.md) | [заметки о выпуске NuGet 2.2](../release-notes/nuget-2.2.md)

NuGet 2.1 была выпущена 4 октября 2012 г.

## <a name="hierarchical-nugetconfig"></a>Иерархические Nuget.Config

NuGet 2.1 обеспечивает большую гибкость в управлении параметры NuGet посредством рекурсивно проходу вверх структуру папок, ищете `NuGet.Config` файлы, а затем построить из набора всех найденных файлов конфигурации.  Например рассмотрим ситуацию, где предусмотрела репозиторием внутреннего пакета для сборок непрерывной Интеграции других внутренних зависимостей. Структура папок для отдельного проекта может выглядеть следующим образом:

    C:\
    C:\myteam\
    C:\myteam\solution1
    C:\myteam\solution1\project1

Кроме того Если включается восстановление пакетов для решения, будет также существовать следующую папку:

    C:\myteam\solution1\.nuget

Чтобы у команды внутреннего пакета репозиторий доступен для всех проектов, которые группа работает, а не делая его доступным для каждого проекта на компьютере, мы можно создать новый файл Nuget.Config и поместить его в папке c:\myteam. Не существует способа для указания папки пакетов для проекта.

```xml
<configuration>
    <packageSources>
    <add key="Official project team source" value="http://teamserver/api/v2/" />
    </packageSources>
    <disabledPackageSources />
    <activePackageSource>
    <add key="Official project team source" value="http://teamserver/api/v2/" />
    </activePackageSource>
</configuration>
```

Теперь мы видим, что источник был добавлен с помощью команды «nuget.exe источники» из любой папки под c:\myteam как показано ниже:

![Источники пакетов из родительской конфигурации nuget](./media/releasenotes-21-cfg-hierarchy.png)

`NuGet.Config` Поиск файлов выполняется в следующем порядке:

1. `.nuget\Nuget.Config`
2. Рекурсивные стека из папки проекта к корню
3. Глобальный `Nuget.Config` (`%appdata%\NuGet\Nuget.Config`)

Конфигурации находятся не в *обратный порядок*, основаны на порядок выше это означает, что глобальный файл Nuget.Config будет быть применяется первой, следуют обнаруженным файлам Nuget.Config из корневого каталога в папку проекта, по `.nuget\Nuget.Config`.  Это особенно важно в том случае, если вы используете `<clear/>` элемента, удаляемого набора элементов из файла конфигурации.

## <a name="specify-packages-folder-location"></a>Укажите «пакеты» расположение папки

В прошлом NuGet управляемого решения пакеты из папки известных «пакеты» найден в корневой папке решения.  Для групп разработчиков, имеющих множество различных решений, которые установлены пакеты NuGet это может привести в том же пакете, устанавливаемого в различных местах в файловой системе.

NuGet 2.1 обеспечивает более детальный контроль над расположение папки с пакетами с помощью `repositoryPath` элемент `NuGet.Config` файла.  Основываясь на предыдущем примере поддержка иерархической структуры Nuget.Config, предполагается, что нам требуется отправить все проекты в общем ресурсе C:\myteam\ той же папке пакетов.  Для этого просто добавьте следующую запись `c:\myteam\Nuget.Config`.

```xml
<configuration>
    <config>
    <add key="repositoryPath" value="C:\myteam\teampackages" />
    </config>
    ...
</configuration>
```

В этом примере общий `Nuget.Config` файл указывает папку Общие пакеты для каждого проекта, созданного под C:\myteam, независимо от глубины. Обратите внимание, что при наличии существующей папке, в пакеты под корневом каталоге решения, необходимо удалить его, прежде чем NuGet разместит пакеты в новом расположении.

## <a name="support-for-portable-libraries"></a>Поддержка переносимых библиотек

[Переносимые библиотеки](/dotnet/standard/cross-platform/cross-platform-development-with-the-portable-class-library) — это функция, впервые представленный в .NET 4, который позволяет создавать сборки, которые могут работать без внесения изменений на разных платформах Microsoft, созданных в версиях платформы.NET Framework для Silverlight для Windows Phone и даже Xbox 360 (хотя в настоящее время NuGet не поддерживает целевой переносимой библиотеки Xbox).  Путем расширения [упаковать соглашения](../create-packages/supporting-multiple-target-frameworks.md) для профилей и framework версии NuGet 2.1 теперь поддерживает переносимые библиотеки, позволяя создавать пакеты, которые имеют составное framework и целевой профиль `lib` папки.

Например рассмотрим следующие переносимой библиотеки классов доступных платформ.

![Диалоговое окно создания переносимой библиотеки](./media/releasenotes-21-plib.png)

После сборки библиотеки и команда `nuget.exe pack MyPortableProject.csproj` запускается новый портативный структуру папок пакета библиотеки можно увидеть, проверив содержимое созданного пакета NuGet.

![Макет пакета переносимой библиотеки](./media/releasenotes-21-plib-layout.png)

Как вы видите, соглашение переносимой библиотеки папки имя соответствует шаблону «переносимой-{framework 1} + {framework n}» где идентификаторов платформы выполните существующий [соглашения об имени и версии framework](../reference/target-frameworks.md). Единственным исключением из соглашения об имени и версии можно найти в framework идентификатор, используемый для Windows Phone.  Данный моникер следует использовать имя платформы «wp» (wp7, wp71 или wp8). Например, с помощью «silverlight-wp7» приведет к ошибкой.

При установке пакета, созданный на основе этой структуры папок, NuGet теперь правила можно применять его framework и профиль для нескольких целевых объектов, как указано в имени папки.  За правил сопоставления NuGet — это принцип, что целевые объекты «подробные» будет иметь приоритет над «менее конкретными».  Это означает, что моникеров, предназначенных для определенной платформы будет всегда будет предпочтительнее переносимых из них, если они оба совместимы с проектом.  Кроме того Если несколько целевых объектов, переносимых совместимы с проектом, NuGet предпочтут той, где набор платформ, поддерживаемых «близко расположенные» в проект ссылки на пакет.

## <a name="targeting-windows-8-and-windows-phone-8-projects"></a>Предназначенных для Windows 8 и Windows Phone 8 проектов

Помимо добавления поддержки для нацеливания на проекты переносимых библиотек, NuGet 2.1 обеспечивает новый моникеры платформ для проектов Windows 8 Store и Windows Phone 8, а также некоторые новые общие моникеры для Windows Store и проекты Windows Phone, которые будут проще управлять в будущих версиях для соответствующих платформ.

Для приложений Windows 8 Store идентификаторы выглядеть следующим образом:

| NuGet 2.0 и более ранних версий | NuGet 2.1 |
| ---------------- | ----------- |
| winRT45. NETCore45 | Windows, Windows8, win, win8 |

<br/>
Для проектов Windows Phone идентификаторы выглядеть следующим образом:

| Phone OS | NuGet 2.0 и более ранних версий | NuGet 2.1 |
| --- | --- | --- |
| Windows Phone 7 | silverlight3 wp | WP, WindowsPhone7 wp7, WindowsPhone, |
| Windows Phone 7.5 (Mango) | silverlight4 wp71 | wp71 WindowsPhone71 |
| Windows Phone 8 | (не поддерживается) | wp8 WindowsPhone8 |

<br/>
Во всех указанных выше изменений старые имена framework будет продолжать полностью поддерживаются NuGet 2.1.  В дальнейшем новые имена можно использовать как и стабильнее будущими версиями для соответствующих платформ. Новые имена будут *не* быть поддерживается в версиях NuGet до 2.1, тем не менее, поэтому планируйте сеансы момента, когда нужно переключить.

## <a name="improved-search-in-package-manager-dialog"></a>Улучшенный поиск в диалоговом окне диспетчера пакетов

За последние несколько итераций изменения, появившиеся в коллекцию NuGet, который значительно улучшена скорость и релевантности поиска пакета.  Тем не менее эти усовершенствования были ограничены веб-сайт nuget.org.  NuGet 2.1 предоставляет улучшенные возможности поиска посредством диалогового окна диспетчера пакетов NuGet.  В качестве примера предположим, что вы хотите найти пакет Windows Azure Caching Preview.  Разумный поисковый запрос для этого пакета может быть «Azure Cache».  В предыдущих версиях диалоговое окно диспетчера пакетов требуемому пакету бы даже отсутствовать на первой странице результатов.  Тем не менее в NuGet 2.1, нужного пакета теперь отображается в верхней части результатов поиска.

![Поиск диалоговое окно диспетчера пакетов](./media/releasenotes-21-vsdlg-search.png)

## <a name="force-package-update"></a>Принудительное обновление пакета

До NuGet 2.1, NuGet пропустить обновление пакета при отсутствии не номером версии высокого уровня.  Это вызывает трудностей для определенных сценариев — особенно в случае построения или сценариях непрерывной Интеграции, где команда не хотели увеличить число при каждой сборке версию пакета.  Принудительно выполнить обновление, независимо от того, было требуемое поведение.  NuGet 2.1 решает эту проблему с флагом «переустановить».  Например предыдущие версии NuGet приведет следующие при попытке обновить пакет, который не имеет более новая версия пакета:

    PM> Update-Package Moq
    No updates available for 'Moq' in project 'MySolution.MyConsole'.

С флагом переустановить пакет будет обновляться независимо от того, следует ли более новая версия.

    PM> Update-Package Moq -Reinstall
    Successfully removed 'Moq 4.0.10827' from MySolution.MyConsole.
    Successfully uninstalled 'Moq 4.0.10827'.
    Successfully installed 'Moq 4.0.10827'.
    Successfully added 'Moq 4.0.10827' to MySolution.MyConsole.

Еще один сценарий, которого флаг reinstall подтверждает полезно — это повторно нацеливание на платформу. При изменении целевой платформы проекта (например, в .NET 4-.NET 4.5), Update-Package-переустановить можно обновить ссылки на верные сборки для всех пакетов NuGet, установленные в проекте.

## <a name="edit-package-sources-within-visual-studio"></a>Изменить источники пакетов в среде Visual Studio

В предыдущих версиях NuGet обновление источника пакета из в диалоговом окне Visual Studio параметры, необходимые для удаления и повторного добавления источника пакета.  NuGet 2.1 улучшает этот рабочий процесс, поддерживая обновление как функции первого класса пользовательского интерфейса конфигурации.

![Диалоговое окно настройки диспетчера пакетов](./media/releasenotes-21-edit-pkg-source.png)

## <a name="bug-fixes"></a>Исправления ошибок

NuGet 2.1 включает множество исправлений ошибок. Полный список рабочих элементов исправленные в NuGet 2.0 обратитесь представление [Issue Tracker NuGet для этого выпуска](http://nuget.codeplex.com/workitem/list/advanced?keyword=&status=Fixed&type=All&priority=All&release=NuGet%202.1&assignedTo=All&component=All&sortField=LastUpdatedDate&sortDirection=Descending&page=0).
